# Linux ì‹œìŠ¤í…œ ë¶€í•˜ ê´€ë ¨ í•™ìŠµ ì •ë¦¬ğŸ‘€

## ğŸ‘¨â€ğŸ’»íŒ€ì›
## ğŸ‘¨â€ğŸ’»Team

|<img src="https://avatars.githubusercontent.com/u/139302518?v=4" width="100" height="100"/>|<img src="https://avatars.githubusercontent.com/u/78792358?v=4" width="100" height="100"/>|
|:-:|:-:|
|ê³½ë³‘ì°¬<br/>[@gato-46](https://github.com/gato-46)|ë°•í˜„ìš°<br/>[@smartcow99](https://github.com/smartcow99)|


## ëª©ì°¨
### 1. ì„œë¡ 
### 2. Linux í‰ê·  ë¶€í•˜ì˜ ê°œë…
### 3. ì ë‹¹í•œ í‰ê·  ë¶€í•˜ë€?
### 4. ì‚¬ë¡€ ì—°êµ¬
### 5. ìš”ì•½

---

## 1. ì„œë¡ 

ì‹œìŠ¤í…œ ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ê²ƒì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë³´í†µ ***`uptime`*** ì´ë¼ëŠ” ëª…ë ¹ì–´ë¥¼ í†µí•´ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê³ ëŠ” í•©ë‹ˆë‹¤.

```bash
$ uptime
02:34:03 up 2 days, 20:14, 1 user, load average: 0.63, 0.83, 0.88
```

í•˜ì§€ë§Œ ì €ëŠ” ê° ì—´ì˜ ì˜ë¯¸ë¥¼ ì •í™•íˆëŠ” ëª¨ë¥´ê³  ìˆì—ˆìŠµë‹ˆë‹¤.

ì´ëŠ” `í˜„ì¬ì‹œê°„`, `ì‹œìŠ¤í…œ ê°€ë™ ì‹œê°„`, `ë¡œê·¸ì¸ ì‚¬ìš©ì ìˆ˜`, `1ë¶„ê°„ í‰ê·  ë¶€í•˜`, `5ë¶„ê°„ í‰ê·  ë¶€í•˜`, `15ë¶„ê°„ í‰ê·  ë¶€í•˜`ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.

## 2. Linux í‰ê·  ë¶€í•˜ì˜ ê°œë…

ì•ì— ìˆëŠ” í˜„ì¬ì‹œê°„, ì‹œìŠ¤í…œ ê°€ë™ ì‹œê°„, ë¡œê·¸ì¸ ì‚¬ìš©ì ìˆ˜ì— ëŒ€í•œê±´ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.

**ê·¸ë ‡ë‹¤ë©´ í‰ê·  ë¶€í•˜ë¼ëŠ” ê²ƒì€ ê³¼ì—° ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì¼ê¹Œìš”?**

```bash
í‰ê· ë¶€í•˜ = í™œì„± í”„ë¡œì„¸ìŠ¤ì˜ í‰ê·  ìˆ˜
```

**ë§Œì•½ í‰ê·  ë¶€í•˜ê°€ 2ë¼ë©´?**

- CPUê°€ 2ê°œë§Œ ìˆëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” ëª¨ë“  CPUê°€ ì™„ì „íˆ ì‚¬ìš© ì¤‘ì´ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- CPUê°€ 4ê°œ ìˆëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” 50%ì˜ ìœ íœ´ CPU ìš©ëŸ‰ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
- CPUê°€ 1ê°œë§Œ ìˆëŠ” ì‹œìŠ¤í…œì—ì„œëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì ˆë°˜ì´ CPU ì‹œê°„ì„ ë†“ê³  ê²½ìŸí•œë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.


## 3. ì ë‹¹í•œ í‰ê·  ë¶€í•˜ë€?

**ê·¸ë ‡ë‹¤ë©´ ì ë‹¹í•œ í‰ê·  ë¶€í•˜ëŠ” ì–´ëŠ ì •ë„ ì¼ê¹Œìš”?**

ìš°ë¦¬ëŠ” í‰ê·  ë¶€í•˜ì— ëŒ€í•œ ì´ìƒì ì¸ ìƒí™©ì€ CPU ìˆ˜ì™€ ê°™ì„ ë–„ë¼ëŠ” ê²ƒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤.  
ì´ ìƒí™©ì—ì„œ ì €í¬ëŠ” ë¨¼ì € CPUì˜ ìˆ˜ë¥¼ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.

```bash
grep 'Model Name' /proc/cpuinfo | wc-l 2
```

ìœ„ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ í†µí•´ CPUì˜ ìˆ˜ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ë•Œ í‰ê·  ë¶€í•˜ê°€ CPUìˆ˜ ë³´ë‹¤ í¬ê²Œ ëœë‹¤ë©´ ê³¼ë¶€í•˜ ìƒíƒœë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ë˜ ë‹¤ë¥¸ ì˜ë¬¸ì´ ìˆìŠµë‹ˆë‹¤.  

**`1ë¶„`, `5ë¶„`, `15ë¶„` ê³¼ ê°™ì€ ì„¸ ê°€ì§€ í‰ê·  í•˜ì¤‘ ê°’ ì¤‘ ì–´ëŠ ê²ƒì„ ì°¸ì¡°í•´ì•¼ í•˜ëŠ”ê±¸ê¹Œìš”?**

ì •ë‹µì€ ëª¨ë‘ ê³ ë ¤í•´ì•¼ í•œë‹¤ ì…ë‹ˆë‹¤.  
ì„¸ ê°€ì§€ ë‹¤ë¥¸ ì‹œê°„ ê°„ê²©ì€ ì‹œìŠ¤í…œ ë¶€í•˜ì˜ ì¶”ì„¸ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆëŠ” ë°ì´í„° ì†ŒìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

- ê°’ì´ ë¹„ìŠ·í•˜ê±°ë‚˜ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šìœ¼ë©´ ì‹œìŠ¤í…œ ë¶€í•˜ê°€ ì•ˆì •ì ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  
- 1ë¶„ ê°’ì´ 15ë¶„ ê°’ë³´ë‹¤ í›¨ì”¬ ë‚®ì€ ê²½ìš°, ë¶€í•˜ê°€ ê°ì†Œí•˜ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  
- ë°˜ëŒ€ë¡œ 1ë¶„ ê°’ì´ 15ë¶„ ê°’ë³´ë‹¤ í›¨ì”¬ ë†’ìœ¼ë©´ ë¶€í•˜ê°€ ì¦ê°€í•˜ê³  ìˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.  
- 1ë¶„ í‰ê·  ë¶€í•˜ê°€ CPU ìˆ˜ì— ê·¼ì ‘í•˜ê±°ë‚˜ ì´ˆê³¼í•˜ë©´ ì‹œìŠ¤í…œì— ê³¼ë¶€í•˜ê°€ ë°œìƒí–ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

*ì‹¤ì œ ì‚¬ë¡€ì—ì„œëŠ” 70% ìˆ˜ì¤€ìœ¼ë¡œ ìœ ì§€í•´ì•¼í•œë‹¤ê³  ë§í•˜ê³  ìˆìŠµë‹ˆë‹¤.*

## 4. ì‚¬ë¡€ ì—°êµ¬ğŸ¥½



### ì¤€ë¹„ ì‚¬í•­ğŸ› 
```bash
$ sudo apt install stress, sysstat
```
```bash
Machine configuration: 2 CPUs, 8GB RAM.
```


### ì‹¤í—˜ ë‚´ìš©
```bash
root@myserver1:/home/username# uptime
14:20:17 up  5:13,  8 users,  load average: 1.24, 3.40, 2.46
```

#### ì‹œë‚˜ë¦¬ì˜¤ 1
```bash
root@myserver1:/home/username# stress --cpu 1 --timeout 600
stress: info: [7991] dispatching hogs: 1 cpu, 0 io, 0 vm, 0 hdd
```

**`$ stress --cpu 1 --timeout 600`** ëŠ” stressë¼ëŠ” ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì‹œìŠ¤í…œì— CPU ë¶€í•˜ë¥¼ ê±¸ê¸° ìœ„í•œ ëª…ë ¹ì…ë‹ˆë‹¤.  

ìœ„ ëª…ë ¹ì–´ëŠ” í…ŒìŠ¤íŠ¸ë‚˜ ì„±ëŠ¥ ì¸¡ì •ì„ ìœ„í•´ ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ì— ì¸ìœ„ì ì¸ ë¶€í•˜ë¥¼ ì¤„ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.  
ê° ì˜µì…˜ê³¼ ìˆ«ìì˜ ì˜ë¯¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.


##### 1. stress
  `stress`ëŠ” ì‹œìŠ¤í…œì˜ ë‹¤ì–‘í•œ ë¦¬ì†ŒìŠ¤(CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ë“±)ì— ë¶€í•˜ë¥¼ ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì´ë‚˜ ì•ˆì •ì„±ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
##### 2. --cpu 1
  `--cpu N` ì˜µì…˜ì€ CPUì— ë¶€í•˜ë¥¼ ì¤„ ë•Œ ì‚¬ìš©í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.  
  ì´ ê²½ìš°, Nì€ ë¶€í•˜ë¥¼ ê±¸ ì½”ì–´ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
  **1**ì´ë¼ëŠ” ìˆ«ìëŠ” 1ê°œì˜ CPU ì½”ì–´ì— ë¶€í•˜ë¥¼ ê±¸ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.  
  ì´ë¥¼ í†µí•´ CPUê°€ ì–¼ë§ˆë‚˜ íš¨ìœ¨ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  
##### 3. --timeout 600
  `--timeout N` ì˜µì…˜ì€ ì£¼ì–´ì§„ ì‹œê°„ ë™ì•ˆë§Œ ë¶€í•˜ë¥¼ ê±¸ë„ë¡ ì„¤ì •í•˜ëŠ” ì˜µì…˜ì…ë‹ˆë‹¤.  
  **600**ì´ë¼ëŠ” ìˆ«ìëŠ” 600ì´ˆ, ì¦‰ 10ë¶„ ë™ì•ˆ ë¶€í•˜ë¥¼ ê±¸ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.  
  ì´ ì‹œê°„ì´ ì§€ë‚˜ë©´ ëª…ë ¹ì´ ìë™ìœ¼ë¡œ ì¢…ë£Œë©ë‹ˆë‹¤.

##### ì „ì²´ ëª…ë ¹ ìš”ì•½
  **$ stress --cpu 1 --timeout 600**ì€ 1ê°œì˜ CPU ì½”ì–´ì— 10ë¶„ ë™ì•ˆ ë¶€í•˜ë¥¼ ì£¼ëŠ” ëª…ë ¹ì…ë‹ˆë‹¤.

##### ë‘ ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ uptimeí‰ê·  ë¶€í•˜ì˜ ë³€í™”ë¥¼ í™•ì¸
```bash
# the `-d` parameter indicates highlighting the changed areas
root@myserver1:/home/username# watch -d uptime
14:23:06 up  5:17,  8 users,  load average: 0.65, 2.10, 2.10
```

##### ì„¸ ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ mpstatCPU ì‚¬ìš©ëŸ‰ì˜ ë³€í™”ë¥¼ ê´€ì°°
```bash
root@myserver1:/home/username# mpstat -P ALL 5
```
![image](https://github.com/user-attachments/assets/286f4ca7-4791-4d8b-9f60-15dcd6f0d254)
í„°ë¯¸ë„ 2ì—ì„œ í‰ê·  ë¶€í•˜ê°€ 1ë¶„ ë™ì•ˆ 1.00ìœ¼ë¡œ ì²œì²œíˆ ì¦ê°€í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í„°ë¯¸ë„ 3ì—
ì„œ í•œ CPUê°€ ì‹¤ì œë¡œ 100% ì‚¬ìš© ì¤‘ì´ì§€ë§Œ iowaitê°€ 0ì¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í‰ê·  ë¶€í•˜ê°€
ì¦ê°€í•œ ê²ƒì´ CPUê°€ 100% ì‚¬ìš© ì¤‘ì´ê¸° ë•Œë¬¸ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.


##### ì„¸ ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ pidstatì„ í†µí•´ í”„ë¡œì„¸ìŠ¤ CPU ì‚¬ìš©ëŸ‰ ê´€ì°°
```bash
root@myserver1:/home/username# pidstat -u 5 1
```
![image](https://github.com/user-attachments/assets/f2adbeb6-6953-4ff8-a047-5bb3b6070c18)
ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ CPU ì‚¬ìš©ëŸ‰ì„ 100%ë¡œ ë§Œë“¤ê³  ìˆì„ê¹Œ? pidstatë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì‹œë‚˜ë¦¬ì˜¤ 2
```bash
root@myserver1:/home/username# stress -i 1 --timeout 600
stress: info: [8262] dispatching hogs: 0 cpu, 1 io, 0 vm, 0 hdd
```
```bash
root@myserver1:/home/username# watch -d uptime
Every 2.0s: uptime      myserver1: Mon Sep 23 14:31:14 2024
14:31:14 up  5:24,  8 users,  load average: 1.12, 1.90, 2.05
```


##### ì„¸ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ mpstatCPU ì‚¬ìš©ëŸ‰ì˜ ë³€í™”ë¥¼ ê´€ì°°í•˜ê¸° ìœ„í•´ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
root@myserver1:/home/username# mpstat -P ALL 5 1
```
![image](https://github.com/user-attachments/assets/f641028e-6b22-4cf3-9d76-31b1babfbea9)
ì—¬ê¸°ì—ì„œ í‰ê·  ë¶€í•˜ê°€ 1ë¶„ ë™ì•ˆ 1.06ìœ¼ë¡œ ì²œì²œíˆ ì¦ê°€í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ CPUì˜ ì‹œìŠ¤í…œ CPU ì‚¬ìš©ëŸ‰ì´ 11.90%ë¡œ ì¦ê°€í•˜ê³  iowaitëŠ” 46.28%ì— ë„ë‹¬í•©ë‹ˆë‹¤. ì´ëŠ” í‰ê·  ë¶€í•˜ ì¦ê°€ê°€ iowaitì˜ ì¦ê°€ ë•Œë¬¸ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.


##### ì„¸ ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ pidstatì„ í†µí•´ í”„ë¡œì„¸ìŠ¤ CPU ì‚¬ìš©ëŸ‰ ê´€ì°°.
![image](https://github.com/user-attachments/assets/880fbd81-46a4-464d-bf5d-1045d446bcda)
ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ê°€ ì´ë ‡ê²Œ ë†’ì€ iowaitë¥¼ ë°œìƒì‹œí‚¤ê³  ìˆëŠ”ì§€ pidstatë¥¼ ì‚¬ìš©í•˜ì—¬ ì•Œì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì‹œë‚˜ë¦¬ì˜¤ 3
```bash
root@myserver1:/home/username# stress -c 8 --timeout 600
stress: info: [8564] dispatching hogs: 8 cpu, 0 io, 0 vm, 0 hdd
```
```bash
root@myserver1:/home/username# uptime
14:35:57 up  5:29,  8 users,  load average: 4.67, 2.27, 2.08
```


##### ì„¸ ë²ˆì§¸ í„°ë¯¸ë„ì—ì„œ pidstatì„ í†µí•´ í”„ë¡œì„¸ìŠ¤ CPU ì‚¬ìš©ëŸ‰ ê´€ì°°.
```bash
root@myserver1:/home/username# pidstat -u 5 1
```
![image](https://github.com/user-attachments/assets/d6dbffb3-4cbf-4902-9620-515657fa5d51)
8ê°œì˜ í”„ë¡œì„¸ìŠ¤ê°€ 2ê°œì˜ CPUë¥¼ ë†“ê³  ê²½ìŸí•˜ê³  ìˆìœ¼ë©°, ê° í”„ë¡œì„¸ìŠ¤ê°€ ìµœëŒ€ 75%ì˜ ì‹œê°„ ë™ì•ˆ CPUë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤( %waitì¶œë ¥ì˜ ì—´ì—ì„œ í‘œì‹œ). CPUì˜ ê³„ì‚° ìš©ëŸ‰ì„ ì´ˆê³¼í•˜ëŠ” ì´ëŸ¬í•œ í”„ë¡œì„¸ìŠ¤ëŠ” ê¶ê·¹ì ìœ¼ë¡œ CPU ê³¼ë¶€í•˜ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤.


## 5. ìš”ì•½


ìš”ì•½ ë‚´ìš©



> ì°¸ê³ ìë£Œ: ["Deep Understanding of Average Load in Linux."](https://blog.devgenius.io/deep-understanding-of-average-load-in-linux-74822e1dbcb1)
