# Linux 시스템 부하 관련 학습 정리👀

## 목차
1. [서론](#-1.-서론)
2. [Linux 평균 부하의 개념](#-2.-Linux-평균-부하의-개념)
3. [적당한 평균 부하란?](#-3.-적당한-평균-부하란?)
4. [사례 연구](#-4.-사례-연구)
5. [요약](#-5.-요약)

---


## 1. 서론

시스템 속도가 느려지는 것을 확인하기 위해서 보통 ***`uptime`*** 이라는 명령어를 통해 다음과 같은 결과를 확인하고는 합니다.

``` shell
$ uptime
02:34:03 up 2 days, 20:14, 1 user, load average: 0.63, 0.83, 0.88
```

하지만 저는 각 열의 의미를 정확히는 모르고 있었습니다.

이는 `현재시간`, `시스템 가동 시간`, `로그인 사용자 수`, `1분간 평균 부하`, `5분간 평균 부하`, `15분간 평균 부하`를 나타냅니다.

## 2. Linux 평균 부하의 개념

앞에 있는 현재시간, 시스템 가동 시간, 로그인 사용자 수에 대한건 쉽게 알 수 있는 내용입니다.

**그렇다면 평균 부하라는 것은 과연 무엇을 의미하는 것일까요?**

```
평균부하 = 활성 프로세스의 평균 수
```

**만약 평균 부하가 2라면?**

- CPU가 2개만 있는 시스템에서는 모든 CPU가 완전히 사용 중이라는 것을 의미합니다.
- CPU가 4개 있는 시스템에서는 50%의 유휴 CPU 용량이 있다는 것을 의미합니다.
- CPU가 1개만 있는 시스템에서는 프로세스의 절반이 CPU 시간을 놓고 경쟁한다는 뜻입니다.


## 3. 적당한 평균 부하란?

**그렇다면 적당한 평균 부하는 어느 정도 일까요?**

우리는 평균 부하에 대한 이상적인 상황은 CPU 수와 같을 떄라는 것을 알고 있습니다.  
이 상황에서 저희는 먼저 CPU의 수를 알아야합니다.

``` shell
grep 'Model Name' /proc/cpuinfo | wc-l 2
```

위와 같은 명령어를 통해 CPU의 수를 알 수 있습니다.  
이때 평균 부하가 CPU수 보다 크게 된다면 과부하 상태라는 것을 알 수 있습니다.

하지만 또 다른 의문이 있습니다.  

**`1분`, `5분`, `15분` 과 같은 세 가지 평균 하중 값 중 어느 것을 참조해야 하는걸까요?**

정답은 모두 고려해야 한다 입니다.  
세 가지 다른 시간 간격은 시스템 부하의 추세를 분석할 수 있는 데이터 소스를 제공합니다.

- 값이 비슷하거나 크게 다르지 않으면 시스템 부하가 안정적임을 나타냅니다.  
- 1분 값이 15분 값보다 훨씬 낮은 경우, 부하가 감소하고 있음을 나타냅니다.  
- 반대로 1분 값이 15분 값보다 훨씬 높으면 부하가 증가하고 있음을 나타냅니다.  
- 1분 평균 부하가 CPU 수에 근접하거나 초과하면 시스템에 과부하가 발생했음을 의미합니다.  

## 4. 사례 연구🥽

### 준비 사항🛠
```shell
$ sudo apt install stress, sysstat
```
```
Machine configuration: 2 CPUs, 8GB RAM.
```

## 5. 요약


요약 내용



> 참고자료: ["Deep Understanding of Average Load in Linux."](https://blog.devgenius.io/deep-understanding-of-average-load-in-linux-74822e1dbcb1)
